<!DOCTYPE HTML>
<html>
<head>
    <title>Esports Configuration Study - Participate</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    
    <!-- STYLES -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* --- 1. Theme Variables --- */
        :root {
            --bg-color: #fff;
            --text-color: #555;
            --heading-color: #333;
            --alt-bg-color: #f9f9f9;
            --nav-bg-color: rgba(255, 255, 255, 0.95);
            --nav-link-color: #555;
            --game-item-bg: #fff;
            --game-item-border: #e0e0e0;
            --box-bg: #f5f5f5;
            --box-highlight-bg: #e8f7f6;
            --box-incentive-bg: #fff9e6;
            --footer-bg: #333;
            --footer-text: white;
            
            /* Static colors */
            --brand-color: #4ecdc4;
            --brand-color-hover: #3dbebd;
            --brand-shadow: rgba(78, 205, 196, 0.3);
            --white: #fff;
            --black: #000;
            --incentive-border: #ffc107;
            
            /* Transitions */
            --transition-speed: 0.3s;
        }

        /* 2. Auto dark mode (system default) */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-color: #1a1a1a;
                --text-color: #ccc;
                --heading-color: #eee;
                --alt-bg-color: #222;
                --nav-bg-color: rgba(25, 25, 25, 0.95);
                --nav-link-color: #ccc;
                --game-item-bg: #2a2a2a;
                --game-item-border: #444;
                --box-bg: #333;
                --box-highlight-bg: #2a3a39;
                --box-incentive-bg: #3a362a;
                --footer-bg: #222;
                --footer-text: #ccc;
            }
        }

        /* 3. Manual dark mode (forced by toggle) */
        body.dark-mode {
            --bg-color: #1a1a1a;
            --text-color: #ccc;
            --heading-color: #eee;
            --alt-bg-color: #222;
            --nav-bg-color: rgba(25, 25, 25, 0.95);
            --nav-link-color: #ccc;
            --game-item-bg: #2a2a2a;
            --game-item-border: #444;
            --box-bg: #333;
            --box-highlight-bg: #2a3a39;
            --box-incentive-bg: #3a362a;
            --footer-bg: #222;
            --footer-text: #ccc;
        }

        /* 4. Manual light mode (forced by toggle) */
        body.light-mode {
            --bg-color: #fff;
            --text-color: #555;
            --heading-color: #333;
            --alt-bg-color: #f9f9f9;
            --nav-bg-color: rgba(255, 255, 255, 0.95);
            --nav-link-color: #555;
            --game-item-bg: #fff;
            --game-item-border: #e0e0e0;
            --box-bg: #f5f5f5;
            --box-highlight-bg: #e8f7f6;
            --box-incentive-bg: #fff9e6;
            --footer-bg: #333;
            --footer-text: white;
        }

        /* --- 5. Refactored Base Styles --- */
        body {
            font-family: 'Source Sans Pro', -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            line-height: 1.65;
            color: var(--text-color);
            background: var(--bg-color);
            transition: background var(--transition-speed), color var(--transition-speed);
        }

        h1, h2, h3 {
            font-weight: 300;
            color: var(--heading-color);
            line-height: 1.3;
        }

        h1 { font-size: 2.75em; margin-bottom: 0.5em; }
        h2 { font-size: 2em; margin-bottom: 1em; border-bottom: 2px solid var(--brand-color); padding-bottom: 0.5em; }
        h3 { font-size: 1.5em; margin-bottom: 0.75em; }
        
        a {
            color: var(--brand-color);
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }

        /* Header */
        #header {
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), 
                        url('images/hero.png') center/cover;
            color: var(--white); /* Stays white on dark image */
            padding: 8em 0;
            text-align: center;
        }

        #header h1 {
            color: var(--white);
            font-size: 3.5em;
            margin-bottom: 0.3em;
        }

        #header p {
            font-size: 1.5em;
            margin-bottom: 2em;
            opacity: 0.9;
        }

        /* Button */
        .button {
            display: inline-block;
            background: var(--brand-color);
            color: var(--white) !important;
            padding: 1em 3em;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1em;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
        }

        .button:hover {
            background: var(--brand-color-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--brand-shadow);
            text-decoration: none;
        }

        .button.large {
            padding: 1.2em 4em;
            font-size: 1.3em;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2em;
        }

        /* Sections */
        section {
            padding: 5em 0;
            transition: background var(--transition-speed);
        }

        section.alt {
            background: var(--alt-bg-color);
        }

        /* Navigation */
        #nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--nav-bg-color);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px); /* For Safari */
            padding: 1em 0;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            z-index: 1000;
            transition: background var(--transition-speed);
        }

        #nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 2em;
            flex-wrap: wrap;
            align-items: center; /* Vertically center toggle */
            max-width: 1200px; /* Match container width */
            margin: 0 auto;
            padding: 0 2em; /* Match container padding */
        }

        #nav a {
            color: var(--nav-link-color);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s;
            white-space: nowrap;
        }

        #nav a:hover {
            color: var(--brand-color);
            text-decoration: none;
        }

        /* Games Grid */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1em;
            margin: 2em 0;
        }

        .game-item {
            background: var(--game-item-bg);
            padding: 1.5em;
            text-align: center;
            border: 2px solid var(--game-item-border);
            border-radius: 4px;
            font-weight: 600;
            transition: all 0.3s;
            color: var(--heading-color); /* Ensure text color updates */
        }

        .game-item:hover {
            border-color: var(--brand-color);
            transform: translateY(-3px);
        }

        /* Features */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 3em;
            margin: 3em 0;
        }

        .feature {
            text-align: center;
        }

        .feature .icon {
            font-size: 3em;
            color: var(--brand-color);
            margin-bottom: 0.5em;
        }

        /* List styles */
        ul.checklist {
            list-style: none;
            margin: 2em 0;
        }

        ul.checklist li {
            padding: 0.5em 0 0.5em 2em;
            position: relative;
            font-size: 1.1em;
        }

        ul.checklist li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: var(--brand-color);
            font-weight: bold;
            font-size: 1.5em;
        }

        /* Box */
        .box {
            background: var(--box-bg);
            padding: 2em;
            border-left: 4px solid var(--brand-color);
            margin: 2em 0;
            transition: background var(--transition-speed);
        }

        .box.highlight {
            background: var(--box-highlight-bg);
            border-color: var(--brand-color);
        }

        .box.incentive {
            background: var(--box-incentive-bg);
            border-color: var(--incentive-border);
        }

        /* Footer */
        #footer {
            background: var(--footer-bg);
            color: var(--footer-text);
            text-align: center;
            padding: 3em 0;
            transition: background var(--transition-speed), color var(--transition-speed);
        }

        #footer a {
            color: var(--brand-color);
            text-decoration: none;
        }
        
        #footer a:hover {
            text-decoration: underline;
        }

        /* Responsive */
        @media screen and (max-width: 980px) { /* Adjusted breakpoint for better nav wrapping */
            #nav ul {
                gap: 1em;
                justify-content: center;
            }
        }
        
        @media screen and (max-width: 768px) {
            #header h1 { font-size: 2em; }
            #header p { font-size: 1.2em; }
            h2 { font-size: 1.5em; }
            section { padding: 3em 0; }
            #nav ul { gap: 1em; padding: 0 1em; justify-content: center; }
            #nav a { font-size: 0.9em; }
        }

        /* --- 6. Theme Toggle Styles (REDESIGNED) --- */
        .theme-toggle-container {
            margin-left: auto; /* Pushes toggle to the far right */
        }
        
        .theme-toggle {
            background: var(--alt-bg-color);
            border: 1px solid var(--game-item-border);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all var(--transition-speed);
            position: relative;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent; /* for mobile */
        }
        .theme-toggle:hover {
            border-color: var(--brand-color);
        }
        
        /* This is the actual checkbox, we hide it */
        .theme-toggle input {
            display: none; 
        }
        
        /* This is the container for the icons */
        .theme-toggle .icon {
            position: absolute;
            transition: transform 0.3s ease-out, opacity 0.3s ease-out;
            user-select: none;
        }

        /* Initial state (light mode) */
        .theme-toggle .sun {
            transform: scale(1) rotate(0deg);
            opacity: 1;
        }
        
        .theme-toggle .moon {
            transform: scale(0) rotate(-90deg);
            opacity: 0;
        }

        /* This selector is triggered by the JS setting .dark-mode on the <body> */
        /* This is the state for dark mode */
        body.dark-mode .theme-toggle .sun {
            transform: scale(0) rotate(90deg);
            opacity: 0;
        }

        body.dark-mode .theme-toggle .moon {
            transform: scale(1) rotate(0deg);
            opacity: 1;
        }
        
    </style>
</head>
<body>

    <!-- Navigation -->
    <nav id="nav">
        <ul>
            <li><a href="#aim">What is Our Aim?</a></li>
            <li><a href="#games">Games We're Studying</a></li>
            <li><a href="#requirements">What Do You Need?</a></li>
            <li><a href="#incentive">Incentive</a></li>
            <li><a href="#participate">Ready to Participate?</a></li> <!-- SWAPPED -->
            <li><a href="#about-us">About Us</a></li> <!-- SWAPPED -->
            
            <!-- MOVED AND REDESIGNED THEME TOGGLE -->
            <li class.theme-toggle-container">
                <!-- The <label> is the clickable button -->
                <label class="theme-toggle" for="theme-toggle-checkbox" title="Toggle theme">
                    
                    <!-- The checkbox is hidden but tracks the state (checked/unchecked) -->
                    <input type="checkbox" id="theme-toggle-checkbox">
                    
                    <!-- The icons are shown/hidden with CSS based on the <body> class -->
                    <span class="icon sun">â˜¼</span>
                    <span class="icon moon">â˜¾</span>
                </label>
            </li>
        </ul>
    </nav>

    <!-- Header -->
    <section id="header">
        <div class="container">
            <h1>Esports Configuration Study</h1>
            <p>Help us understand how competitive gamers optimize their game settings</p>
            <a href="https://ncsu.qualtrics.com/jfe/form/SV_3W8KwkVMOjMmzOu" class="button large" target="_blank">Take the Survey</a>
        </div>
    </section>

    <!-- What is Our Aim? -->
    <section id="aim">
        <div class="container">
            <h2>What is Our Aim?</h2>
            <p style="font-size: 1.2em; margin-bottom: 2em;">
                We're looking for participants in an esports research experiment. If you play any esports games 
                either competitively or casually, you are eligible for this survey! We'll ask you about the 
                games you play, how you configure your settings, and your preferences for visual quality vs. performance.
            </p>

            <div class="features">
                <div class="feature">
                    <div class="icon">ðŸŽ®</div>
                    <h3>Share Your Setup</h3>
                    <p>Tell us about your game settings, hardware, and configuration choices</p>
                </div>
                <div class.feature">
                    <div class="icon">ðŸ“Š</div>
                    <h3>Help Research</h3>
                    <p>Contribute to academic research that helps improve gaming experiences</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Games We're Studying -->
    <section id="games" class="alt">
        <div class="container">
            <h2>Games We're Studying</h2>
            <p style="font-size: 1.1em; margin-bottom: 2em;">
                We're examining configuration practices across 14 popular competitive titles
            </p>
            <div class="games-grid">
                <div class="game-item">Valorant</div>
                <div class="game-item">CS2</div>
                <div class="game-item">Dota 2</div>
                <div class="game-item">League of Legends</div>
                <div class="game-item">Overwatch 2</div>
                <div class="game-item">Apex Legends</div>
                <div class="game-item">Fortnite</div>
                <div class="game-item">PUBG</div>
                <div class="game-item">Starcraft II</div>
                <div class="game-item">Rocket League</div>
                <div class="game-item">Call of Duty</div>
                <div class="game-item">FIFA / FC 24</div>
                <div class="game-item">Street Fighter</div>
                <div class-="game-item">Rainbow Six Siege</div>
            </div>
        </div>
    </section>

    <!-- What Do You Need? -->
    <section id="requirements">
        <div class="container">
            <h2>What Do You Need?</h2>
            
            <div class="box highlight">
                <ul class="checklist">
                    <li>Must be 18+ years old</li>
                    <li>Play at least one esports game listed above either competitively or casually</li>
                    <li>Play the game on your PC and ensure that the game you want to answer the question about is installed. This will allow you to upload the configuration files for that game, which will earn you an additional entry into the raffle.</li>
                    <li>Commitment of at least 8 minutes per section for each game you choose to provide details about</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Incentive -->
    <section id="incentive" class="alt">
        <div class="container">
            <h2>Incentive</h2>
            
            <div class="box incentive">
                <p style="font-size: 1.1em;">
                    <strong>Participants have a chance to win $100 digital gift cards</strong> (or equivalent in local currency) 
                    through a raffle. Uploading game configuration files will give you an entry into an additional raffle, 
                    increasing your chances to win!
                </p>
            </div>
        </div>
    </section>

    <!-- Ready to Participate? (SWAPPED) -->
    <section id="participate"> <!-- Removed .alt -->
        <div class="container">
            <h2>Ready to Participate?</h2>

            <div style="text-align: center; margin: 3em 0;">
                <p style="font-size: 1.3em; margin-bottom: 2em;">
                    Your insights will help us understand how gamers optimize their setups for competitive play
                </p>
                <a href="https://ncsu.qualtrics.com/jfe/form/SV_3W8KwkVMOjMmzOu" class="button large" target="_blank">Start the Survey</a>
            </div>

            <!-- REMOVED "About this Study" box -->

        </div>
    </section>

    <!-- About Us Section (SWAPPED & UPDATED) -->
    <section id="about-us" class="alt"> <!-- Added .alt -->
        <div class="container">
            <h2>About Us</h2>
            <p style="font-size: 1.2em; margin-bottom: 2em;">
                This research is conducted by the <strong>Visual Experience Lab at NC State University</strong>. 
                The study examines how competitive players navigate tradeoffs between visual quality and 
                performance when configuring game settings.
            </p>
            <p style="font-size: 1.2em; margin-bottom: 2em;">
                I am Ashish Rajpurohit, a PhD Student at North Carolina State University. I'm currently working on a research
                project with the <a href="https://vxlab.csc.ncsu.edu/" target="_blank" rel="noopener noreferrer">Visual Experience Lab</a> at NC State, under the guidance of <a href="https://watson.csc.ncsu.edu/" target="_blank" rel="noopener noreferrer">Dr. Benjamin Watson</a>.
            </p>
            <p style="font-size: 1.2em; margin-bottom: 2em;">
                We're interested in looking at esports and video games from an academic perspective, and to find out
                more about this growing industry to help players get the most out of their gameplay, either casually or
                competitively.
            </p>
            <!-- ADDED text from the removed box -->
            <p style="font-size: 1.1em; opacity: 0.8;">
                <strong>IRB Approval:</strong> #25527
            </p>
        </div>
    </section>

    <!-- Footer -->
    <section id="footer">
        <div class="container">
            <p style="margin-bottom: 0.5em;">
                <a href="https://ncsu.qualtrics.com/jfe/form/SV_3W8KwkVMOjMmzOu" target="_blank">Take Survey</a>
            </p>
            <p style="opacity: 0.7;">
                NC State University Visual Experience Lab | IRB #25527
            </p>
        </div>
    </section>

    <!-- THEME TOGGLE SCRIPT -->
    <script>
        (function() {
            // Immediately-invoked function to avoid polluting global scope
            
            // Get the checkbox and the body
            const toggleCheckbox = document.getElementById('theme-toggle-checkbox');
            const body = document.body;
            const preferenceKey = 'theme-preference';

            /**
             * Applies the theme to the body and updates the toggle's checked state.
             * @param {string} theme - 'light' or 'dark'
             */
            function setTheme(theme) {
                if (theme === 'dark') {
                    body.classList.add('dark-mode');
                    body.classList.remove('light-mode'); // Ensure light is off
                    toggleCheckbox.checked = true; // Sync checkbox state
                } else { // 'light'
                    body.classList.add('light-mode');
                    body.classList.remove('dark-mode'); // Ensure dark is off
                    toggleCheckbox.checked = false; // Sync checkbox state
                }
            }

            // --- 1. Set initial theme on page load ---
            
            // Check for a saved user preference in local storage
            const savedPreference = localStorage.getItem(preferenceKey);
            
            // Check if the user's system prefers dark mode
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

            let initialTheme;
            if (savedPreference) {
                // Use the user's saved preference
                initialTheme = savedPreference;
            } else {
                // No preference saved, use the system preference
                initialTheme = systemPrefersDark ? 'dark' : 'light';
            }
            
            // Apply the determined theme and update the checkbox state
            setTheme(initialTheme);


            // --- 2. Listen for toggle clicks ---
            
            // We listen for the 'change' event on the checkbox
            toggleCheckbox.addEventListener('change', () => {
                // When the label is clicked, the checkbox state changes
                const newTheme = toggleCheckbox.checked ? 'dark' : 'light';
                
                // Apply the new theme
                setTheme(newTheme);
                
                // Save this new choice to local storage
                localStorage.setItem(preferenceKey, newTheme);
            });

            // --- 3. Listen for system theme changes ---
            
            // This listens for when the user changes their OS theme
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
                
                // We ONLY update the theme if the user hasn't made a manual choice
                if (!localStorage.getItem(preferenceKey)) {
                    const newSystemTheme = e.matches ? 'dark' : 'light';
                    // Apply the new system theme and update the checkbox
                    setTheme(newSystemTheme);
                }
            });
        })();
    </script>

</body>
</html>
